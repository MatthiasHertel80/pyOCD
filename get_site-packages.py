import subprocess
import sys
import re

def get_site_packages():
    # Run python -m site and capture output
    result = subprocess.run([sys.executable, '-m', 'site'], 
                          capture_output=True, 
                          text=True)
    
    # Parse the output for site-packages path
    paths = result.stdout.split('\n')
    for line in paths:
        if 'site-packages' in line:
            # Extract path with regex
            match = re.search(r"'([^']*site-packages)'", line)
            if match:
                return match.group(1)
    
    raise RuntimeError("Could not find site-packages directory")

if __name__ == "__main__":
    site_packages = get_site_packages()
    print(f"SITE_PACKAGES={site_packages}")
    